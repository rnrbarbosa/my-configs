global
    daemon
    maxconn 256

defaults
    mode http
    timeout connect 5000ms
    timeout client 50000ms
    timeout server 50000ms

frontend http-in *:80
    redirect scheme https if !{ ssl_fc }

frontend https-in
  mode http
  bind 0.0.0.0:443 ssl crt /etc/haproxy/certs/server.pem
  default_backend backend_server

backend backend_server
    server srv1 127.0.0.1:9999 maxconn 32

